(self.webpackChunk=self.webpackChunk||[]).push([[58],{58:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>i});var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"create-product-page"},[a("h1",{staticClass:"page-title"},[t._v(t._s(t.title))]),t._v(" "),a("el-form",{ref:"product",attrs:{"label-width":"100px",model:t.data,rules:t.rules}},[a("el-form-item",{attrs:{label:"商品名称",prop:"brandName"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入商品名称",type:""},model:{value:t.data.brandName,callback:function(e){t.$set(t.data,"brandName",e)},expression:"data.brandName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"商品描述",prop:"title"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入商品描述",type:"textarea"},model:{value:t.data.title,callback:function(e){t.$set(t.data,"title",e)},expression:"data.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"商品价格",prop:"price"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入商品价格",type:"number"},model:{value:t.data.price,callback:function(e){t.$set(t.data,"price",e)},expression:"data.price"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"商品原价",prop:"originalPrice"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入商品原件",type:"number"},model:{value:t.data.originalPrice,callback:function(e){t.$set(t.data,"originalPrice",e)},expression:"data.originalPrice"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"商品评分",prop:"averageScore"}},[a("el-rate",{attrs:{"show-score":"","allow-half":"",disabled:""},model:{value:t.data.averageScore,callback:function(e){t.$set(t.data,"averageScore",e)},expression:"data.averageScore"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"商品分类",prop:"types"}},[a("el-select",{attrs:{placeholder:"请选择分类"},model:{value:t.data.types,callback:function(e){t.$set(t.data,"types",e)},expression:"data.types"}},t._l(t.types,(function(t){return a("el-option",{key:t.id,attrs:{value:t.id,label:t.text}})})),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"商品销量",prop:"sold"}},[a("el-input",{attrs:{autocomplete:"off",disabled:!0,placeholder:"请输入商品销量",type:"number"},model:{value:t.data.sold,callback:function(e){t.$set(t.data,"sold",e)},expression:"data.sold"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"店铺地址",prop:"shopAddr"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入店铺地址",type:""},model:{value:t.data.shopAddr,callback:function(e){t.$set(t.data,"shopAddr",e)},expression:"data.shopAddr"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"店铺分店",prop:"subShop"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入店铺分店",type:"number"},model:{value:t.data.subShop,callback:function(e){t.$set(t.data,"subShop",e)},expression:"data.subShop"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"商品图片",prop:"img"}},[a("el-upload",{attrs:{action:"/admin/product/upload","show-file-list":!1,"on-success":t.uploadSuccess,"on-error":t.uploadError}},[a("el-button",{attrs:{type:"primary"}},[t._v("点击上传")]),t._v(" "),a("span",{staticClass:"upload-tip",attrs:{slot:"tip"},slot:"tip"},[t._v("选择上传的图片")])],1),t._v(" "),t.data.img?a("img",{staticClass:"upload-img",attrs:{src:t.data.img}}):t._e()],1),t._v(" "),a("el-form-item",{attrs:{label:"商品内容",prop:"content"}},[a("quill-editor",{model:{value:t.data.content,callback:function(e){t.$set(t.data,"content",e)},expression:"data.content"}})],1),t._v(" "),a("el-button",{staticStyle:{"margin-left":"100px"},attrs:{type:"success"},on:{click:t.submitProductData}},[t._v("提交")])],1)],1)};l._withStripped=!0;var s=[{id:1,text:"美食",img:"01.png"},{id:2,text:"电影",img:"02.png"},{id:3,text:"酒店",img:"03.png"},{id:4,text:"休闲",img:"04.png"},{id:5,text:"外卖",img:"05.png"},{id:6,text:"KTV",img:"06.png"},{id:7,text:"丽人",img:"07.png"},{id:8,text:"小吃",img:"08.png"},{id:9,text:"周边游",img:"09.png"},{id:10,text:"火车票",img:"10.png"}];const r={data(){let t={};return["brandName","title","price","originalPrice","shopAddr","subShop","img","content","types"].forEach((e=>{t[e]=[{required:!0,message:"请输入内容"}]})),{types:s,data:{sold:0,averageScore:1},rules:t,title:"创建商品",submitUrl:"/admin/product/create"}},computed:{dealData(){return["originalPrice","price","subShop"].forEach((t=>{this.data[t]=+this.data[t]})),this.data}},methods:{uploadSuccess(t){1===t.state?this.$set(this.data,"img",t.img):(this.$message.closeAll(),this.$message.error(t.msg))},uploadError(){this.$message.closeAll(),this.$message.error("上传错误，请重新上传")},submitProductData(){this.$refs.product.validate((t=>{t&&this.$http.post(this.submitUrl,this.dealData).then((({data:t})=>{1===t.state?(this.$message.success("创建成功"),setTimeout((()=>{this.$router.replace("/product/list/1")}),1e3)):(this.$message.closeAll(),this.$message.error(t.msg))}))}))}}};var o=(0,a(8726).Z)(r,l,[],!1,null,null,null);o.options.__file="src/views/product/CreateProduct.vue";const i=o.exports}}]);